@page "/"
@using Data;
@inject IJSRuntime jsruntime
@inject NavigationManager navigation
<div class="content mt-n3 mb-4">
    <div class="search-box search-dark shadow-sm border-0 mt-4 bg-theme rounded-sm bottom-0">
        <i class="fa fa-search ms-1"></i>
        <input type="text" class="border-0" placeholder="Searching for something? Try 'pizza'" data-search>
    </div>
    <div class="search-results disabled-search-list">
        <div>
            <a href="#" data-filter-item data-filter-name="all food burger cheese ham bacon">
                <div class="d-flex mt-4">
                    <div class="align-self-center">
                        <img src="images/food/small/1s.jpg" class="rounded-m me-3" width="80">
                    </div>
                    <div class="align-self-center">
                        <h2 class="font-15 line-height-s mt-1 mb-n1">Cheesy Hamburger <br> with Bacon and Ham</h2>
                        <p class="mb-0 font-11 mt-2 line-height-s">
                            <i class="fa fa-truck color-brown-dark pe-2"></i>Ready in 20 Minutes
                        </p>
                    </div>
                    <div class="ms-auto ps-3 align-self-center text-center">
                        <h2 class="font-18 mb-n2">$14.75</h2>
                        <span class="color-highlight font-9">per serving</span>
                    </div>
                </div>
            </a>
            <a href="#" data-filter-item data-filter-name="all food fries chicken breast fried">
                <div class="d-flex mt-4">
                    <div class="align-self-center">
                        <img src="images/food/small/8s.jpg" class="rounded-m me-3" width="80">
                    </div>
                    <div class="align-self-center">
                        <h2 class="font-15 line-height-s mt-1 mb-n1">Chicken Crispy <br> Strips with Fries</h2>
                        <p class="mb-0 font-11 mt-2 line-height-s">
                            <i class="fa fa-truck color-brown-dark pe-2"></i>Ready in 25 Minutes
                        </p>
                    </div>
                    <div class="ms-auto ps-3 align-self-center text-center">
                        <h2 class="font-18 mb-n2">$23.44</h2>
                        <span class="color-highlight font-9">per serving</span>
                    </div>
                </div>
            </a>
            <a href="#" data-filter-item data-filter-name="all food pizza special house">
                <div class="d-flex mt-4">
                    <div class="align-self-center">
                        <img src="images/food/small/2s.jpg" class="rounded-m me-3" width="80">
                    </div>
                    <div class="align-self-center">
                        <h2 class="font-15 line-height-s mt-1 mb-n1">House Special <br> Classic Crust Pizza</h2>
                        <p class="mb-0 font-11 mt-2 line-height-s">
                            <i class="fa fa-truck color-brown-dark pe-2"></i>Ready in 43 Minutes
                        </p>
                    </div>
                    <div class="ms-auto align-self-center text-center">
                        <h2 class="font-18 mb-n2">$17.25</h2>
                        <span class="color-highlight font-9">per serving</span>
                    </div>
                </div>
            </a>
        </div>
    </div>
</div>
<div class="search-no-results disabled mt-4">
    <div class="card card-style">
        <div class="content">
            <h1>No Results</h1>
            <p>
                Your search brought up no results. Try using a different keyword. Or try typying all
                to see all items in the demo. These can be linked to anything you want.
            </p>
        </div>
    </div>
</div>

<div class="splide single-slider slider-no-arrows visible-slider slider-no-dots" id="single-slider-1">
    <div class="splide__track">
        <div class="splide__list">
            @for (int i = 0; i < slider.Count; i++)
            {
                var item = slider[i];

                <div class="splide__slide" @onclick="@(()=> @GoToDetail(@item.IDTruyen.ToString()))">
                    <div class="card card-style ms-3" style="background-image:url(@item.LinkImage); height:300px">
                        <div class="card-top px-3 py-3">
                            <a href="#" data-menu="menu-heart" class="bg-white rounded-sm icon icon-xs float-end"><i class="fa fa-heart color-red-dark"></i></a>
                        </div>
                        <div class="card-bottom px-3 py-3">
                            <h1 class="color-white">@item.TitleTruyen</h1>
                        </div>

                        <div class="card-overlay bg-gradient opacity-30"></div>
                        <div class="card-overlay bg-gradient"></div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<div class="content mt-0 mb-0">
    <div class="d-flex">
        <div class="align-self-center">
            <h1 class="mb-0 font-18">Đề cử</h1>
        </div>
        <div class="ms-auto align-self-center">
            <a href="#" class="float-end font-12 font-400">Xem Tất Cả</a>
        </div>
    </div>
</div>

<div class="splide double-slider visible-slider slider-no-arrows slider-no-dots" id="double-slider-1">
    <div class="splide__track">
        <div class="splide__list">
            @for (int i = 0; i < TruyenDeCu.Count; i++)
            {
                var item = TruyenDeCu[i];
                <div class="splide__slide">
                    <div class="card m-2 card-style" style="height:300px">
                        <img src="@item.LinkImage" class="img-fluid">
                        <div class="p-2 bg-theme rounded-sm">
                            <div class="d-flex">
                                <div>
                                    <h4 class="mb-n1 font-14 line-height-xs pb-2">@item.TitleTruyen</h4>
                                </div>
                            </div>
                            <p class="font-10 mb-0"><i class="fa fa-star color-yellow-dark pe-2"></i>34 đề cử</p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>

<div class="content mb-0">
    <div class="d-flex">
        <div class="align-self-center">
            <h1 class="mb-0 font-18">Nổi bật</h1>
        </div>
        <div class="ms-auto align-self-center">
            <a href="#" class="float-end font-12 font-400">Xem Tất Cả</a>
        </div>
    </div>
    <div class="row mb-0">
        <div class="col-6 pe-1">
            <div class="card card-style mx-0" style="background-image:url(@TruyenNoiBat[0].LinkImage); height:350px ">
                <div class="card-bottom p-3">
                    <h4 class="color-white">@TruyenNoiBat[0].TitleTruyen</h4>
                    <p class="color-white opacity-60 line-height-s">
                        @TruyenNoiBat[0].Author
                    </p>
                </div>
                <div class="card-overlay bg-gradient opacity-30"></div>
                <div class="card-overlay bg-gradient"></div>
            </div>
        </div>
        <div class="col-6">
            <div class="card card-style mx-0 mb-2" style="background-image:url(@TruyenNoiBat[1].LinkImage); height:170px">
                <div class="card-bottom p-3">
                    <h4 class="color-white">@TruyenNoiBat[1].TitleTruyen</h4>
                    <p class="color-white opacity-60 line-height-s font-12">
                        @TruyenNoiBat[1].Author.
                    </p>
                </div>
                <div class="card-overlay bg-gradient opacity-30"></div>
                <div class="card-overlay bg-gradient"></div>
            </div>
            <div class="card card-style mx-0 mb-0" style="background-image:url(@TruyenNoiBat[2].LinkImage); height:170px">
                <div class="card-bottom p-3">
                    <h4 class="color-white">@TruyenNoiBat[2].TitleTruyen</h4>
                    <p class="color-white opacity-60 line-height-s font-12">
                        @TruyenNoiBat[2].Author.
                    </p>
                </div>
                <div class="card-overlay bg-gradient opacity-30"></div>
                <div class="card-overlay bg-gradient"></div>
            </div>
        </div>
    </div>
</div>

<div class="content mt-0 mb-0">
    <div class="d-flex">
        <div class="align-self-center">
            <h1 class="mb-0 font-18">Đọc nhiều</h1>
        </div>
        <div class="ms-auto align-self-center">
            <a href="#" class="float-end font-12 font-400">Xem Tất Cả</a>
        </div>
    </div>
</div>

<div class="splide double-slider visible-slider slider-no-arrows slider-no-dots" id="double-slider-2">
    <div class="splide__track">
        <div class="splide__list">
            <div class="splide__slide">
                <div class="card m-2 card-style">
                    <img src="images/food/regular/1.jpg" class="img-fluid">
                    <div class="p-2 bg-theme rounded-sm">
                        <div class="d-flex">
                            <div>
                                <h4 class="mb-n1 font-14 line-height-xs pb-2">Royal <br>Burger</h4>
                            </div>
                            <div class="ms-auto">
                                <h4 class="font-16">$24</h4>
                            </div>
                        </div>
                        <p class="font-10 mb-0"><i class="fa fa-star color-yellow-dark pe-2"></i>34 Recommend It</p>
                    </div>
                </div>
            </div>
            <div class="splide__slide">
                <div class="card m-2 card-style">
                    <img src="images/food/regular/2.jpg" class="img-fluid">
                    <div class="p-2 bg-theme rounded-sm">
                        <div class="d-flex">
                            <div>
                                <h4 class="mb-n1 font-14 line-height-xs pb-2">Pizza <br>Prosciutto</h4>
                            </div>
                            <div class="ms-auto">
                                <h4 class="font-16">$24</h4>
                            </div>
                        </div>
                        <p class="font-10 mb-0"><i class="fa fa-star color-yellow-dark pe-2"></i>34 Recommend It</p>
                    </div>
                </div>
            </div>
            <div class="splide__slide">
                <div class="card m-2 card-style">
                    <img src="images/food/regular/3.jpg" class="img-fluid">
                    <div class="p-2 bg-theme rounded-sm">
                        <div class="d-flex">
                            <div>
                                <h4 class="mb-n1 font-14 line-height-xs pb-2">Chocolate <br>Dessert</h4>
                            </div>
                            <div class="ms-auto">
                                <h4 class="font-16">$24</h4>
                            </div>
                        </div>
                        <p class="font-10 mb-0"><i class="fa fa-star color-yellow-dark pe-2"></i>34 Recommend It</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<div class="content mb-0">
    <div class="d-flex">
        <div class="align-self-center">
            <h1 class="mb-0 font-18">Yêu thích</h1>
        </div>
        <div class="ms-auto align-self-center">
            <a href="#" class="float-end font-12 font-400">See All</a>
        </div>
    </div>
</div>

<div class="splide double-slider visible-slider slider-no-arrows slider-no-dots" id="double-slider-3">
    <div class="splide__track">
        <div class="splide__list">
            <div class="splide__slide">
                <div class="card rounded-m m-2 shadow-l" style="height:185px; background-image:url(images/food/small/3s.jpg)">
                    <div class="card-top mt-2">
                        <p class="color-white"><i class="fa fa-star color-yellow-dark px-2"></i>4.9</p>
                    </div>
                    <div class="card-bottom mb-2">
                        <h5 class="color-white font-15 px-2">Chocolate Cookies</h5>
                        <p class="color-white mb-0 mt-n2 font-11 opacity-30 px-2">Loved by John Doe</p>
                    </div>
                    <div class="card-overlay bg-gradient opacity-30"></div>
                    <div class="card-overlay bg-gradient"></div>
                </div>
            </div>
            <div class="splide__slide">
                <div class="card rounded-m m-2 shadow-l" style="height:185px; background-image:url(images/food/small/4s.jpg)">
                    <div class="card-top mt-2">
                        <p class="color-white"><i class="fa fa-star color-yellow-dark px-2"></i>4.7</p>
                    </div>
                    <div class="card-bottom mb-2">
                        <h5 class="color-white font-15 px-2">Grilled Steak</h5>
                        <p class="color-white mb-0 mt-n2 font-11 opacity-30 px-2">Loved by John Doe</p>
                    </div>
                    <div class="card-overlay bg-gradien opacity-30t"></div>
                    <div class="card-overlay bg-gradient"></div>
                </div>
            </div>
            <div class="splide__slide">
                <div class="card rounded-m m-2 shadow-l" style="height:185px;background-image:url(images/food/small/1s.jpg)">
                    <div class="card-top mt-2">
                        <p class="color-white"><i class="fa fa-star color-yellow-dark px-2"></i>5.0</p>
                    </div>
                    <div class="card-bottom mb-2">
                        <h5 class="color-white font-15 px-2">The Royal Burger</h5>
                        <p class="color-white mb-0 mt-n2 font-11 opacity-30 px-2">Loved by John Doe</p>
                    </div>
                    <div class="card-overlay bg-gradient opacity-30"></div>
                    <div class="card-overlay bg-gradient"></div>
                </div>
            </div>
            <div class="splide__slide">
                <div class="card rounded-m m-2 shadow-l" style=" height:185px;background-image:url(images/food/small/4s.jpg)">
                    <div class="card-top mt-2">
                        <p class="color-white"><i class="fa fa-star color-yellow-dark px-2"></i>5.0</p>
                    </div>
                    <div class="card-bottom mb-2">
                        <h5 class="color-white font-15 px-2">House Special Pizza</h5>
                        <p class="color-white mb-0 mt-n2 font-11 opacity-30 px-2">Loved by John Doe</p>
                    </div>
                    <div class="card-overlay bg-gradient opacity-30"></div>
                    <div class="card-overlay bg-gradient"></div>
                </div>
            </div>
        </div>
    </div>
</div>
@code
{
    private List<Item> slider;
    private List<Item> TruyenDeCu;
    private List<Item> TruyenHot;
    private List<Item> TruyenNoiBat;
    DB.API aPi = new DB.API();
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await jsruntime.InvokeVoidAsync("SlideInit");
        }
        await base.OnAfterRenderAsync(firstRender);
    }
    protected override async Task OnInitializedAsync()
    {
        slider = await aPi.SliderGet();
        TruyenDeCu = await aPi.TruyenDeCu();
        TruyenNoiBat = await aPi.TruyenFeatured();
        TruyenHot = await aPi.TruyenHotGet();
        await base.OnInitializedAsync();
    }
    void GoToDetail(string ID)
    {
        navigation.NavigateTo("/detail/" + ID);
    }
}